# 实现简单虚拟机

## 总纲

这学期，我给大家简要介绍了虚拟化技术，同时，我也给大家分享了几次相关的文章。考虑到计算机组成原理、操作系统、数据结构等计算机基础知识，出此题让大家对这些知识有更深入的理解。

不论是一类虚拟化还是二类虚拟化，都有一个VMM（virtual machine manager ），vmm介于原始资源和应用程序间。我们知道，一类虚拟化管理程序是在硬件以上，二类虚拟机管理程序（vmm）是在宿主操作系统上。实现一个类似vmware或者virtualbox的二类vmm或者一类的esxi等，对我们而言是不切实际的。

但是我们却可以尝试实现一个狭义的虚拟机，请参见参考文献~

操作系统其实是将硬件资源进行抽象，也就是将一些硬件变成一个功能。举个例子就是，CPU这个硬件抽象到操作系统其实就是计算的功能。同理，存储器（包括主存和辅存）的功能就是存储数据，当然你需要注意，冯诺伊曼体系结构计算机是将指令和数据都认为是数据存储起来。io设备的功能自然就是同外界进行交互的功能。 

## 题目

### Level 1 实现一个简易的虚拟机

该题目仅需要你用编程语言定义几个指令，定义几个寄存器。然后编写一个程序，只能使用你定义的指令和寄存器来实现一个四则运算的简单功能并能正确进行运算。

### Level 2 提升

在Level 1的基础上，理清数据在模拟寄存器中的流向，理清指令的调用过程，然后输出数据在模拟寄存器的流向以及输出模拟指令调用的顺序。

### Level 3 附加功能

在Level 1或者Level 2的基础上，实现其他功能。如：

- 文件输入/输出
- 实现其他计算功能
- 模拟内存
- 等等

### Level 4 提升

在level 1中，我们调用指令后从模拟寄存器中取得的数据都是10进制的。但是在实际硬件中，是一个二进制，所以，这个Level要求你，重新修改设计寄存器和指令的定义，使得输入和输出的数据仍为10进制，但实际的运算和储存在模拟寄存器中却是2进制的。

提示：不要纠结于数据到底怎么表示，数据始终是那个数据，只是用不同的规则表示而已。你其实只需要写一个二进制/10进制互转的函数，以及将寄存器的维数改变一下就行。当然，你可能还需要用到原码、补码间的转换。

### 说明

- **基础要求**：Level 1~Level2
- 尽量完成基础要求吧，给大家的资料足够了。提交的时候，万一没做起，也要尽量交，做到多少算多少。
- 不要照抄代码，至少你得把变量名给我改一下吧？我说的是，提交的内容不要照抄网上的，学的时候，多抄几遍然后自己理思路了自己重写，就是学习了~
- **不要抄代码！！！不要抄代码！！！不要抄代码！！！后果自负~**

## 有趣的问题

**这不是考核题目了，8月25日前能完成的19级朋友，我请前三个喝奶茶~**

https://justinmeiners.github.io/lc3-vm/

如上链接！

## 参考文献

### 寄存器虚拟机/栈式虚拟机

https://www.cnblogs.com/unixfy/p/3280264.html

https://www.cnblogs.com/unixfy/p/3335874.html

https://www.cnblogs.com/unixfy/p/3337917.html

### Level 1/2参考文献

https://www.ctolib.com/topics-55380.html

https://www.zhihu.com/question/33084689

https://blog.csdn.net/bdss58/article/details/83628766

https://zhuanlan.zhihu.com/p/80750124

